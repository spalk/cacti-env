/*
  Display.h - Library for interaction with display of Cacti-Env main device
  Created by Dmitry Natkha, October 14, 2020.
*/

/* Nokia display pinout
            SCK  18  (clk)
            MOSI 23  (din)
            DC   19
            RST  14
            CS   5   
*/


#ifndef Display_h
#define Display_h

#include <PCD8544.h>


class Display
{
  public:
    Display();
    void init();
    void turn_backlight_on();
    void turn_backlight_off();
    void switch_backlight();
    bool get_backlight_status();
    void show_welcome_screen();
    void show_title();
    void show_msg_in_title(String title);
    void show_msg_in_line(String msg, int line);
    void show_main_page(float t_out, float t_in, int p, int h, int l1, int l2, int s1, int s2);
    void show_loading_line(String task, String status, int line);
    void clear();

  private:
    PCD8544 lcd;

    // Backlight pin
    int BL = 4;
    bool backlight = false;
    String nodata = "---";

    //

    // custom symbols 
    // Created with online webtool: http://carlosefr.github.io/pcd8544/
    byte glyph_loding_bar[5] = {0x55, 0xaa, 0x55, 0xaa, 0x55};
    byte glyph_temperature[5] = {0x00, 0x30, 0x6e, 0x7e, 0x30};
    byte glyph_house[5] = {0x10, 0x78, 0x5c, 0x78, 0x10};
    byte glyph_cloud[5] = {0x20, 0x34, 0x36, 0x26, 0x04};
    byte glyph_degree[5] = {0x06, 0x09, 0x09, 0x06, 0x00}; 
    byte glyph_drop[5] = {0x38, 0x64, 0x7e, 0x7c, 0x38};
    byte glyph_pressure[5] = {0x44, 0x4c, 0x5c, 0x4c, 0x44};
    byte glyph_light[5] = {0x2a, 0x1c, 0x3e, 0x1c, 0x2a};
    byte glyph_soil_moisture[5] = {0x02, 0x3e, 0x7e, 0x3e, 0x02};
    byte glyph_1[5] = {0x00, 0x70, 0x00, 0x00, 0x00};
    byte glyph_2[5] = {0x70, 0x00, 0x70, 0x00, 0x00};
    byte glyph_c[5] = {0x4e, 0x51, 0x51, 0x51, 0x40};
    byte glyph_a[5] = {0x5e, 0x49, 0x49, 0x49, 0x5e};
    byte glyph_t[5] = {0x41, 0x41, 0x5f, 0x41, 0x41};
    byte glyph_i[5] = {0x40, 0x51, 0x5f, 0x51, 0x40};
    byte glyph_defis[5] = {0x44, 0x44, 0x44, 0x44, 0x44};
    byte glyph_e[5] = {0x5f, 0x55, 0x55, 0x55, 0x51};
    byte glyph_n[5] = {0x5f, 0x42, 0x44, 0x48, 0x5f};
    byte glyph_v[5] = {0x47, 0x48, 0x50, 0x48, 0x47};
    byte glyph__[5] = {0x40, 0x40, 0x40, 0x40, 0x40};
    byte glyph_cacti[5] = {0x46, 0x48, 0x7f, 0x50, 0x4e};

    // Created with online webtool from https://www.riyas.org/2017/01/online-tool-to-convert-bitmap-to-hex-nokia-arduino.html
    const unsigned char Welcome_Bitmap[504] = {
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0xe0, 0xf0, 0xf0, 0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 
      0xc0, 0x80, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 
      0x00, 0x00, 0x00, 0xe0, 0xf0, 0xf0, 0xe0, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x78, 0xfc, 0x86, 0x03, 0x01, 0x01, 
      0x81, 0x47, 0x00, 0x80, 0x40, 0x30, 0x28, 0x24, 0xff, 0xff, 
      0x00, 0x00, 0x00, 0x78, 0xfc, 0x86, 0x03, 0x01, 0x01, 0x81, 
      0x47, 0x00, 0x04, 0x03, 0xc1, 0xf9, 0x3f, 0x07, 0x01, 0x01, 
      0x07, 0xc0, 0xf9, 0x3f, 0x07, 0x01, 0x01, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0xff, 
      0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 
      0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x41, 0xc1, 0xc0, 
      0x40, 0x41, 0x41, 0x41, 0xc1, 0x00, 0x40, 0xc0, 0xc0, 0x01, 
      0x01, 0x01, 0x41, 0xc0, 0x40, 0x00, 0x40, 0xc1, 0xc1, 0x41, 
      0x01, 0x00, 0x40, 0xc0, 0x41, 0x01, 0x01, 0x01, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x1f, 0x1f, 
      0x1c, 0x1c, 0x1c, 0xff, 0xff, 0xff, 0xff, 0xff, 0x0c, 0x0c, 
      0x0e, 0x0f, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x08, 0x08, 0x40, 
      0x70, 0x7e, 0x4f, 0x45, 0x44, 0x44, 0x64, 0x10, 0x40, 0x70, 
      0x4e, 0x01, 0x07, 0x1f, 0x78, 0x70, 0x0e, 0x01, 0x00, 0x00, 
      0x00, 0x7f, 0x7f, 0x20, 0x18, 0x04, 0x03, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x00, 0x20, 0x00, 0x00, 0xff, 0xff, 0xff, 
      0xff, 0xff, 0x00, 0x20, 0x00, 0x20, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 
      0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x00, 0x20, 0x20, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x21, 0x21, 0x00, 0x01, 0x00, 
      0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x00, 0x01, 0x03, 
      0x03, 0x03, 0x03, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 
      0x00, 0x00, 0x00, 0x00, 
    };
};  

#endif
